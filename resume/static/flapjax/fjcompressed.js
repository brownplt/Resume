function flapjaxInit(_1){var _2={version:4,lib:{},base:{},engine:{},combinators:{},behaviours:{},dom:{},ajax:{},};var l=_2.lib;var e=_2.engine;var b=_2.base;var c=_2.combinators;var be=_2.behaviours;var d=_2.dom;var a=_2.ajax;_2.pub={util:_2};var _a=function(fn,_c,_d,_e,_f){for(var i=0;i<_c.length;i++){_2.pub[_c[i]]=fn;}if(_d!=undefined){var pf=function(){var _12=slice(arguments,0);_12.splice(_d,0,this);return fn.apply(this,_12);};for(var i=0;i<_e.length;i++){for(var j=0;j<_f.length;j++){_e[i][_f[j]]=pf;}}}};_a(function(){return _2;},["getFlapjaxObj"]);l.slice=function(arr,_16,_17){var i,len=arr.length,r=[];if(!_17){_17=len;}if(_17<0){_17=len+_17;}if(_16<0){_16=len-_16;}if(_17<_16){i=_16;_16=_17;_17=i;}for(i=0;i<_17-_16;i++){r[i]=arr[_16+i];}return r;};_a(l.slice,["slice"]);l.isEqual=function(a,b){return (a==b)||((((typeof (a)=="number")&&isNaN(a))||a=="NaN")&&(((typeof (b)=="number")&&isNaN(b))||b=="NaN"));};l.member=function(elt,lst){for(var i=0;i<lst.length;i++){if(l.isEqual(lst[i],elt)){return true;}}return false;};_a(l.member,["member"]);l.zip=function(_1e){if(_1e.length==0){return [];}var ret=[];for(var i=0;i<_1e[0].length;i++){ret.push([]);for(var j=0;j<_1e.length;j++){ret[i].push(_1e[j][i]);}}return ret;};l.map=function(fn){var _23=l.slice(arguments,1);if(_23.length===0){return [];}else{if(_23.length===1){var ret=[];for(var i=0;i<_23[0].length;i++){ret.push(fn(_23[0][i]));}return ret;}else{var ret=l.zip(_23);var o=new Object();for(var i=0;i<ret.length;i++){ret[i]=fn.apply(o,ret[i]);}return ret;}}};_a(l.map,["map","forEach"]);l.filter=function(_29,arr){var res=[];for(var i=0;i<arr.length;i++){if(_29(arr[i])){res.push(arr[i]);}}return res;};_a(l.filter,["filter"]);l.ofold=function(fn,_2e){var _2f=l.slice(arguments,2);if(_2f.length===0){return _2e;}else{var acc=_2e;for(var i=0;i<_2f[0].length;i++){var _32=l.map(function(lst){return lst[i];},_2f);_32.push(acc);acc=fn.apply({},_32);}return acc;}};_a(l.ofold,["ofold"]);l.fold=function(fn,_35){var _36=l.slice(arguments,2);if(_36.length===0){return _35;}else{if(_36.length===1){var acc=_35;for(var i=0;i<_36[0].length;i++){acc=fn(_36[0][i],acc);}return acc;}else{var acc=_35;for(var i=0;i<_36[0].length;i++){var _3b=l.map(function(lst){return lst[i];},_36);_3b.push(acc);acc=fn.apply({},_3b);}return acc;}}};_a(l.fold,["fold"]);l.foldR=function(fn,_3e){var _3f=l.slice(arguments,2);if(_3f.length===0){return _3e;}else{if(_3f.length===1){var acc=_3e;for(var i=_3f[0].length-1;i>-1;i--){acc=fn(_3f[0][i],acc);}return acc;}else{var acc=_3e;for(var i=_3f[0].length-1;i>-1;i--){var _44=l.map(function(lst){return lst[i];},_3f);_44.push(acc);acc=fn.apply({},_44);}return acc;}}};_a(l.foldR,["foldR"]);_2.base.Pulse=function(_46,_47){this.stamp=_46;this.value=_47;};b.PQ=function(){var ctx=this;ctx.val=[];this.insert=function(kv){ctx.val.push(kv);var _4a=ctx.val.length-1;while(_4a>0&&kv.k<ctx.val[Math.floor((_4a-1)/2)].k){var _4b=_4a;_4a=Math.floor((_4a-1)/2);ctx.val[_4b]=ctx.val[_4a];ctx.val[_4a]=kv;}};this.isEmpty=function(){return ctx.val.length===0;};this.pop=function(){if(ctx.val.length==1){return ctx.val.pop();}var ret=ctx.val.shift();ctx.val.unshift(ctx.val.pop());var _4d=0;var kv=ctx.val[0];while(1){var _4f=(_4d*2+1<ctx.val.length?ctx.val[_4d*2+1].k:kv.k+1);var _50=(_4d*2+2<ctx.val.length?ctx.val[_4d*2+2].k:kv.k+1);if(_4f>kv.k&&_50>kv.k){break;}else{if(_4f<_50){ctx.val[_4d]=ctx.val[_4d*2+1];ctx.val[_4d*2+1]=kv;_4d=_4d*2+1;}else{ctx.val[_4d]=ctx.val[_4d*2+2];ctx.val[_4d*2+2]=kv;_4d=_4d*2+2;}}}return ret;};};var _51=0;var _52=1;var _53=function(){return ++_52;};_2.base.propagatePulse=function(_54,_55){var _56=new b.PQ();_56.insert({k:_55.rank,n:_55,v:_54});while(!(_56.isEmpty())){var qv=_56.pop();qv.n.updater(function(_58){for(var i=0;i<qv.n.sendsTo.length;i++){_56.insert({k:qv.n.sendsTo[i].rank,n:qv.n.sendsTo[i],v:_58});}},new b.Pulse(qv.v.stamp,qv.v.value));}};e.Event=function(_5a,_5b){this.updater=_5b;this.sendsTo=[];for(var i=0;i<_5a.length;i++){_5a[i].sendsTo.push(this);}this.rank=++_51;};e.Event.prototype=new Object();e.PubEvent=function(_5d){e.Event.apply(this,[l.slice(arguments,1),_5d]);};e.PubEvent.prototype=e.Event.prototype;_a(e.PubEvent,["Event","Node"]);e.createNode=function(_5e,_5f){return new e.Event(_5e,_5f);};_a(e.createNode,["event_e"]);e.attachListenerNode=function(_60,_61){if(!(_60 instanceof e.Event)){throw "attachListenenerNode: expects event as first arg";}if(!(_61 instanceof e.Event)){throw "attachListenenerNode: expects event as second arg";}_60.sendsTo.push(_61);if(_60.rank>_61.rank){var _62=_51+1;var q=[_61];while(q.length){var cur=q.splice(0,1)[0];cur.rank=++_51;q=q.concat(cur.sendsTo);}}};_a(e.attachListenerNode,[],0,[e.Event.prototype],["attachListener"]);e.removeListenerNode=function(_65,_66){if(!(_65 instanceof e.Event)){throw "removeListenerNode: expects event as first arg";}if(!(_66 instanceof e.Event)){throw "removeListenenerNode: expects event as second arg";}var _67=false;for(var i=0;i<_65.sendsTo.length&&!_67;i++){if(_65.sendsTo[i]==_66){_65.sendsTo.splice(i,1);_67=true;}}return _67;};_a(e.removeListenerNode,[],0,[e.Event.prototype],["removeListener"]);e.createConstantNode=function(_69,_6a){return e.createNode(_69 instanceof Array?_69:[_69],function(_6b,_6c){_6c.value=_6a;_6b(_6c);});};_a(e.createConstantNode,["constant_e","replaceValue_e"],0,[e.Event.prototype],["constant_e","constant","replaceValue_e","replaceValue"]);e.createTimeSyncNode=function(_6d){var nqs=l.map(function(n){var _70=[];return {q:_70,v:e.createNode([n],function(s,p){_70.push(p.value);s(p);},_6d)};},_6d);return e.createNode(l.map(function(n){return n.v;},nqs),function(s,p){var _76=l.fold(function(n,acc){return n.q.length&&acc;},true,nqs);if(_76){p.value=l.map(function(n){return n.q.shift();},nqs);s(p);}});};_a(e.createTimeSyncNode,["sync_e"]);be.Behaviour=function(_7a,_7b){if(!(_7a instanceof e.Event)){throw "Behaviour: expected event as second arg";}var _7c=this;this.last=_7b;this.underlyingRaw=_7a;this.underlying=e.createNode([_7a],function(s,p){_7c.last=p.value;s(p);});};be.Behaviour.prototype=new Object();_a(be.Behaviour,["Behaviour","Behavior"]);c.createEventReceiver=function(){return e.createNode([],function(_7f,_80){_7f(_80);});};_a(c.createEventReceiver,["receiver_e"]);c.sendEvent=function(_81,_82){if(!(_81 instanceof e.Event)){throw "sendEvent: expected Event as first arg";}b.propagatePulse(new b.Pulse(_53(),_82),_81);};_a(c.sendEvent,["sendEvent"],0,[e.Event.prototype],["sendEvent"]);c.sendPulse=function(_83,_84,_85){if(!(_83 instanceof e.Event)&&!(_83 instanceof be.Behaviour)){throw "sendPulse: expected Event or Behaviour as first arg";}if(_83 instanceof be.Behaviour){_83=_83.underlyingRaw;}var _86=new b.Pulse(_53(),_84);_85(_86);b.propagatePulse(_86,_83);};_a(c.sendPulse,["sendPulse"],0,[e.Event.prototype,be.Behaviour.prototype],["sendPulse"]);c.map_ev=function(_87,_88){if(!(_87 instanceof Function)){throw "map_ev: expected function as first arg";}if(!(_88 instanceof e.Event)){throw "map_ev: expected Event as second arg";}return e.createNode([_88],function(s,p){p.value=_87(p.value);s(p);});};c.not_e=function(_8b){if(!(_8b instanceof e.Event)){throw "not_e: expected Event as first arg";}return c.map_ev(function(v){return !v;},_8b);};_a(c.not_e,["not_e"],0,[e.Event.prototype],["not_e","not"]);c.filter_ev=function(_8d,_8e){if(!(_8d instanceof Function)){throw "filter_ev: expected pred as first arg";}if(!(_8e instanceof e.Event)){throw "filter_ev: expected Event as second arg";}return e.createNode([_8e],function(_8f,_90){if(_8d(_90.value)){_8f(_90);}});};_a(c.filter_ev,["filter_e"],1,[e.Event.prototype],["filter_e","filter"]);c.merge_e=function(){var _91=((arguments.length===0)?[]:l.slice(arguments,0));return e.createNode(_91,function(s,p){s(p);});};_a(c.merge_e,["merge_e"],0,[e.Event.prototype],["merge","merge_e"]);c.once_e=function(_94){if(!(_94 instanceof e.Event)){throw "once_e: expected Event as first arg";}var _95=false;return e.createNode([_94],(function(){_95=false;return function(_96,_97){if(!_95){_95=true;_96(_97);}};})());};_a(c.once_e,["once_e"],0,[e.Event.prototype],["once","once_e"]);c.skipFirst=function(_98){if(!(_98 instanceof e.Event)){throw "skipFirst_e: expected Event as first arg";}return e.createNode([_98],(function(){var _99=false;return function(_9a,_9b){if(_99){_9a(_9b);}else{_99=true;}};})());};_a(c.skipFirst,["skipFirst_e"],0,[e.Event.prototype],["skipFirst","skipFirst_e"]);c.collect_ev=function(_9c,_9d,_9e){var acc=_9d;return c.map_ev(function(n){var _a1=_9e(n,acc);acc=_a1;return _a1;},_9c);};_a(c.collect_ev,["collect_e"],0,[e.Event.prototype],["collect_e","collect","transformWithMemory"]);c.switch_e=function(_a2){var _a3=null;var _a4=new c.createEventReceiver();e.createNode([_a2],function(s,p){if(!(p.value instanceof e.Event)){throw "switch_e: expected event as value of input event";}if(_a3!=null){e.removeListenerNode(_a3,_a4);}_a3=p.value;e.attachListenerNode(_a3,_a4);});return _a4;};_a(c.switch_e,["switch_e"],0,[e.Event.prototype],["switch_e","forwardLatest"]);_a(function(a){return c.merge_e(a);},["squeeze_e"],0,[e.Event.prototype],["squeeze_e"]);c.if_e=function(_a8,_a9,_aa){if(_a8 instanceof e.Event){var _ab=-1;var _ac=false;e.createNode([_a8],function(s,p){_ab=p.stamp;_ac=p.value;});return c.merge_e(e.createNode([_a9],function(s,p){if(_ac&&(_ab==p.stamp)){s(p);}}),e.createNode([_aa],function(s,p){if((!_ac)&&(_ab==p.stamp)){s(p);}}));}else{return (_a8?_a9:_aa);}};_a(c.if_e,["if_e","choose_e"],0,[e.Event.prototype],["if_e","choose_e","choose"]);c.cond_e=function(){var _b3=l.slice(arguments,0);var acc=e.createConstantNode([],undefined);for(var i=_b3.length-1;i>-1;i--){acc=c.if_e(_b3[i][0],_b3[i][1],acc);}return acc;};_a(c.cond_e,["cond_e"]);c.and_e=function(){var _b6=l.slice(arguments,0);var acc=(_b6.length>0)?_b6[_b6.length-1]:e.createConstantNode([],true);for(var i=_b6.length-2;i>-1;i--){acc=c.if_e(_b6[i],acc,c.map_ev(function(_){return false;},_b6[i]));}return acc;};_a(c.and_e,["and_e"],0,[e.Event.prototype],["and_e","and"]);c.or_e=function(){var _ba=l.slice(arguments,0);var acc=(_ba.length>2)?_ba[_ba.length-1]:e.createConstantNode([],false);for(var i=_ba.length-2;i>-1;i--){acc=c.if_e(_ba[i],_ba[i],acc);}return acc;};_a(c.or_e,["or_e"],0,[e.Event.prototype],["or_e","or"]);c.___timerID=0;c.__getTimerId=function(){return ++c.___timerID;};c.timerDisablers=[];c.disableTimerNode=function(_bd){c.timerDisablers[_bd.__timerId]();};c.disableTimer=function(v){if(v instanceof be.Behaviour){c.disableTimerNode(v.underlyingRaw);}else{if(v instanceof e.Event){c.disableTimerNode(v);}}};_a(c.disableTimer,["disableTimer"],0,[e.Event.prototype],["disableTimer"]);c.createTimerNodeStatic=function(_bf){var _c0=c.createEventReceiver();_c0.__timerId=c.__getTimerId();var fn=function(){c.sendEvent(_c0,(new Date()).getTime());};var _c2=setInterval(fn,_bf);c.timerDisablers[_c0.__timerId]=function(){clearInterval(_c2);};return _c0;};c.createTimerNode=function(_c3){if(_c3 instanceof be.Behaviour){var _c4=c.createEventReceiver();var res=c.switch_e(_c4);var _c6=c.createTimerNodeStatic(be.valueNow(_c3));c.sendEvent(_c4,_c6);e.createNode([be.changes(_c3)],function(_,p){c.disableTimerNode(_c6);_c6=c.createTimerNodeStatic(p.value);c.sendEvent(_c4,_c6);});res.__timerId=c.__getTimerId();c.timerDisablers[res.__timerId]=function(){c.disableTimerNode[_c6]();return;};return res;}else{return c.createTimerNodeStatic(_c3);}};_a(c.createTimerNode,["timer_e"],0,[be.Behaviour.prototype],["timer_e","asTimer_e"]);c.delayStatic_e=function(_c9,_ca){var _cb=c.createEventReceiver();e.createNode([_c9],function(s,p){setTimeout(function(){c.sendEvent(_cb,p.value);},_ca);});return _cb;};c.delay_e=function(_ce,_cf){if(_cf instanceof be.Behaviour){var _d0=c.createEventReceiver();var _d1={from:_ce,towards:c.delayStatic_e(_ce,be.valueNow(_cf))};var _d2=e.createNode([be.changes(_cf)],function(s,p){e.removeListenerNode(_d1.from,_d1.towards);_d1={from:_ce,towards:c.delayStatic_e(_ce,p.value)};c.sendEvent(_d0,_d1.towards);});var _d5=c.switch_e(_d0);c.sendEvent(_d2,be.valueNow(_cf));return _d5;}else{return c.delayStatic_e(_ce,_cf);}};_a(c.delay_e,["delay_e"],0,[e.Event.prototype],["delay","delay_e"]);c.lift_e=function(fn){var _d7=l.slice(arguments,0);var _d8=[];var _d9=0;var _da=[];for(var i=0;i<_d7.length;i++){if(_d7[i] instanceof e.Event){_da.push(_d7[i]);_d8.push((function(ii){return function(_dd){return _dd[ii];};})(_d9));_d9++;}else{_d8.push((function(aa){return function(){return aa;};})(_d7[i]));}}var _df=this;var _e0=l.slice(_d8,1);if(_da.length===0){return e.createConstantNode([],fn.apply(_df,_d7));}else{if((_da.length===1)&&(fn instanceof Function)){return c.map_ev(function(){var _e1=arguments;return fn.apply(_df,l.map(function(s){return s(_e1);},_e0));},_da[0]);}else{if(_da.length===1){return c.map_ev(function(v){var _e4=arguments;return v.apply(_df,l.map(function(s){return s(_e4);},_e0));},fn);}else{if(fn instanceof Function){return c.map_ev(function(arr){return fn.apply(this,l.map(function(s){return s(arr);},_e0));},e.createTimeSyncNode(_da));}else{if(fn instanceof e.Event){return c.map_ev(function(arr){return arr[0].apply(this,l.map(function(s){return s(arr);},_e0));},e.createTimeSyncNode(_da));}else{throw "unknown lift_e case";}}}}}};_a(c.lift_e,["lift_e","transform_e","map_e","apply_e"],1,[e.Event.prototype],["lift_e","lift","transform_e","map_e","transform","apply_e"]);c.snapshot_e=function(_ea,_eb){return e.createNode([_ea],function(s,p){p.value=be.valueNow(_eb);s(p);});};_a(c.snapshot_e,["snapshot_e"],0,[e.Event.prototype],["snapshot_e","snapshot","takeSnapshot"]);c.filterRepeats_e=function(_ee,_ef){if(!(_ee instanceof e.Event)){throw "filterRepeats_e: expected Event as first arg";}return e.createNode([_ee],function(){var _f0=_ef===undefined?false:true;var _f1=_ef;return function(s,p){if((!_f0)||(!l.isEqual(_f1,p.value))){_f0=true;_f1=p.value;s(p);}};}());};_a(c.filterRepeats_e,["filterRepeats_e"],0,[e.Event.prototype],["filterRepeats_e","filterRepeats"]);c.calmStatic_e=function(_f4,_f5){var out=c.createEventReceiver();e.createNode([_f4],function(){var _f7=null;return function(s,p){if(_f7!==null){clearTimeout(_f7);}_f7=setTimeout(function(){_f7=null;c.sendEvent(out,p.value);},_f5);};}());return out;};c.calm_e=function(_fa,_fb){if(_fb instanceof be.Behaviour){var out=c.createEventReceiver();e.createNode([_fa],function(){var _fd=null;return function(s,p){if(_fd!==null){clearTimeout(_fd);}_fd=setTimeout(function(){_fd=null;c.sendEvent(out,p.value);},be.valueNow(_fb));};}());return out;}else{return c.calmStatic_e.apply(this,arguments);}};_a(c.calm_e,["calm_e"],0,[e.Event.prototype],["calm_e","calm"]);c.blind_e=function(_100,time){return e.createNode([_100],function(){var _102=time instanceof be.Behaviour?function(){return be.valueNow(time);}:function(){return time;};var _103=(new Date()).getTime()-_102()-1;return function(s,p){var _106=(new Date()).getTime();if(_106-_103>_102()){_103=_106;s(p);}};}());};_a(c.blind_e,["blind_e"],0,[e.Event.prototype],["blind_e","blind"]);be.hold=function(_107,init){if(!(_107 instanceof e.Event)){throw "hold: expected event as second arg";}return new be.Behaviour(_107,init);};_a(be.hold,["hold"],0,[e.Event.prototype],["hold","toBehaviour","toBehavior","startsWith"]);be.valueNow=function(_109){return _109.last;};_a(be.valueNow,["valueNow"],0,[be.Behaviour.prototype],["valueNow"]);be.changes=function(_10a){return _10a.underlying;};_a(be.changes,["changes"],0,[be.Behaviour.prototype],["changes","toEvent"]);be.switch_b=function(_10b){var init=be.valueNow(_10b);var _10d=null;var _10e=new c.createEventReceiver();var _10f=e.createNode([be.changes(_10b)],function(_,p){if(!(p.value instanceof be.Behaviour)){throw "switch_b: expected Behaviour as value of Behaviour of first argument";}if(_10d!=null){e.removeListenerNode(_10d,_10e);}_10d=be.changes(p.value);e.attachListenerNode(_10d,_10e);c.sendEvent(_10e,be.valueNow(p.value));});if(init instanceof be.Behaviour){c.sendEvent(_10f,init);}return be.hold(_10e,init instanceof be.Behaviour?be.valueNow(init):init);};_a(be.switch_b,["switch_b"],0,[be.Behaviour.prototype],["switch_b","forwardLatest"]);be.createTimerBehaviour=function(_112){return be.hold(c.createTimerNode(_112),(new Date()).getTime());};_a(be.createTimerBehaviour,["timer_b"],0,[be.Behaviour.prototype],["timer_b","asTimer_b"]);be.delayStatic_b=function(_113,time,init){return be.hold(c.delayStatic_e(be.changes(_113),time),init);};be.delay_b=function(_116,time,init){if(time instanceof be.Behaviour){return be.hold(c.delay_e(be.changes(_116),time),arguments.length>3?init:be.valueNow(_116));}else{return be.delayStatic_b(_116,time,arguments.length>3?init:be.valueNow(_116));}};_a(be.delay_b,["delay_b"],0,[be.Behaviour.prototype],["delay_b","delay"]);be.sendBehaviour=function(_119,val){if(!(_119 instanceof be.Behaviour)){throw "sendBehaviour: expected Behaviour as first arg";}c.sendEvent(_119.underlyingRaw,val);};_a(be.sendBehaviour,["sendBehaviour","sendBehavior"],0,[be.Behaviour.prototype],["sendBehaviour","sendBehavior"]);be.if_b=function(_11b,_11c,_11d){if(!(_11b instanceof be.Behaviour)){_11b=be.createConstantB(_11b);}if(!(_11c instanceof be.Behaviour)){_11c=be.createConstantB(_11c);}if(!(_11d instanceof be.Behaviour)){_11d=be.createConstantB(_11d);}return be.lift_b(function(te,t,f){if(te){return t;}else{return f;}},_11b,_11c,_11d);};_a(be.if_b,["if_b","choose_b"],0,[be.Behaviour.prototype],["if_b","choose_b","choose"]);be.cond_b=function(){var _121=l.slice(arguments,0);return be.lift_b.apply({},[function(){for(var i=0;i<_121.length;i++){if(arguments[i]){return arguments[_121.length+i];}}return undefined;}].concat(l.map(function(pair){return pair[0];},_121).concat(l.map(function(pair){return pair[1];},_121))));};_a(be.cond_b,["cond_b"]);be.createConstantB=function(val){return new be.Behaviour(c.createEventReceiver(),val);};_a(be.createConstantB,["constant_b","receiver_b"]);be.lift_b=function(fn){var args=l.slice(arguments,1);var _128=l.map(be.changes,l.filter(function(v){return v instanceof be.Behaviour;},arguments));var _12a=function(v){return v instanceof be.Behaviour?v.last:v;};var ctx=this;var _12d=function(){return _12a(fn).apply(ctx,l.map(_12a,args));};var _12e=-1;var mid=e.createNode(_128,function(s,p){if(p.stamp!=_12e){_12e=p.stamp;s(p);}});return e.createNode([mid],function(s,p){p.value=_12d();s(p);}).startsWith(_12d());};_a(be.lift_b,["lift_b","transform_b","apply_b"],1,[be.Behaviour.prototype],["lift_b","transform_b","apply_b","transform","lift"]);be.and_b=function(){return be.lift_b.apply({},[function(){for(var i=0;i<arguments.length;i++){if(!arguments[i]){return false;}}return true;}].concat(slice(arguments,0)));};_a(be.and_b,["and_b"],0,[be.Behaviour.prototype],["and_b","and"]);be.or_b=function(){return be.lift_b.apply({},[function(){for(var i=0;i<arguments.length;i++){if(arguments[i]){return true;}}return false;}].concat(slice(arguments,0)));};_a(be.or_b,["or_b"],0,[be.Behaviour.prototype],["or_b","or"]);be.not_b=function(_136){return be.lift_b(function(v){return !v;},_136);};_a(be.not_b,["not_b"],0,[be.Behaviour.prototype],["not_b","not"]);be.blind_b=function(_138,_139){return be.hold(c.blind_e(be.changes(_138),_139),be.valueNow(_138));};_a(be.blind_b,["blind_b"],0,[be.Behaviour.prototype],["blind_b","blind"]);be.calm_b=function(_13a,_13b){return be.hold(c.calm_e(be.changes(_13a),_13b),be.valueNow(_13a));};_a(be.calm_b,["calm_b"],0,[be.Behaviour.prototype],["calm_b","calm"]);be.arrayB=function(init,_13d){var aBox={arr:init instanceof Array?l.slice(init,0):[]};var r=c.createEventReceiver();var resB=new be.Behaviour(_13d instanceof e.Event?c.merge_e(r,_13d):r,aBox.arr);if(_13d instanceof e.Event){c.lift_e(function(arr){if(arr instanceof Array){aBox.arr=arr;}else{throw "array_b: tried to set to value that is not an array";}},_13d);}resB.mutationsE=r;var _142=function(_143){if(aBox.arr[_143]){resB[_143]=function(){var args=l.slice(arguments,0);if(!(aBox.arr instanceof Array)){throw ("previous to "+_143+" arr not array");}aBox.arr[_143].apply(aBox.arr,args);if(!(aBox.arr instanceof Array)){throw ("post "+_143+" arr not array");}c.sendEvent(r,aBox.arr);};}};var _145=function(_146){if(aBox.arr[_146]){resB[_146+"B"]=new be.Behaviour(c.lift_e(function(_){return aBox.arr[_146];},r),aBox.arr[_146]);}};l.map(_142,["push","pop","reverse","shift","slice","splice"]);l.map(_145,["length"]);resB.lengthB=be.lift_b(function(_){return aBox.arr.length;},resB);return resB;};_a(be.arrayB,["array_b"]);d.addEvent=function(obj,_14a,fn){if(obj.addEventListener){obj.addEventListener(_14a,fn,false);return true;}else{if(obj.attachEvent){return obj.attachEvent("on"+_14a,fn);}else{return false;}}};_a(d.addEvent,["addEvent"]);d.getElementsByClass=function(_14c,node,tag){var _14f=[];if((node===null)||(node===undefined)){node=document;}if((tag===null)||(tag===undefined)){tag="*";}var els=node.getElementsByTagName(tag);var _151=els.length;var _152=new RegExp("(^|\\s)"+_14c+"(\\s|$)");for(var i=0,j=0;i<_151;i++){if(_152.test(els[i].className)){_14f.push(els[i]);}}return _14f;};_a(d.getElementsByClass,["getElementsByClass","$$"]);d.swapDom=function(_154,_155){if((_154===null)||(_154===undefined)){throw ("swapDom: expected dom node or id, received: "+_154);}var _156=_2.dom.getObj(_154);if(!(_156.nodeType>0)){throw ("swapDom expected a Dom node as first arg, received "+_156);}if(_155){var _157=_2.dom.getObj(_155);if(!(_157.nodeType>0)){throw "swapDom: can only swap with a DOM object";}try{if(_157!=_156){_156.parentNode.replaceChild(_157,_156);}}catch(e){throw ("swapDom error in replace call: withMeD: "+_157+", replaceMe Parent: "+_156+", "+e+", parent: "+_156.parentNode);}}else{_156.parentNode.removeChild(_156);}return _156;};_a(d.swapDom,["swapDom"]);d.getObj=function(name){if(typeof (name)=="object"){return name;}else{if((typeof (name)=="null")||(typeof (name)=="undefined")){throw "getObj: expects a Dom obj or Dom id as first arg";}else{var res=document.getElementById?document.getElementById(name):document.all?document.all[name]:document.layers?document.layers[name]:(function(){throw "getObj: flapjax: cannot access object";})();if((res===null)||(res===undefined)){throw ("getObj: no obj to get: "+name);}return res;}}};_a(d.getObj,["getObj","$"]);d.topE=c.createEventReceiver();_a(d.topE,["topE"]);d.getMostDom=function(_15a,_15b){var acc=d.getObj(_15a);if((_15b===null)||(_15b===undefined)||(_15b.length<1)){return acc;}else{for(var i=0;i<_15b.length-1;i++){acc=acc[_15b[i]];}return acc;}};d.getDomVal=function(_15e,_15f){var val=d.getMostDom(_15e,_15f);if(_15f&&_15f.length>0){val=val[_15f[_15f.length-1]];}return val;};d.TagB=function(_161,args){this.resE=c.createEventReceiver();this.currentTag=document.createElement(_161);this.extractParameters(args);this.insertChildrenNodes();this.styleHooks=[];this.styleChangedE=c.createEventReceiver();var ctx=this;c.map_ev(function(_){var _165=ctx.currentTag;ctx.currentTag=document.createElement(_161);while(_165.firstChild){ctx.currentTag.appendChild(_165.removeChild(_165.firstChild));}while(ctx.styleHooks.length){e.removeListenerNode(ctx.styleHooks.pop(),ctx.styleChangedE);}ctx.enstyle(ctx.currentTag,ctx.attribs);c.sendEvent(ctx.resE,ctx.currentTag);},this.styleChangedE);this.enstyle(this.currentTag,this.attribs);this.resB=be.hold(this.resE,this.currentTag);};d.TagB.prototype={extractParameters:function(args){this.arrs=[];var _167=[];var _168=[];this.arrs.push(_168);for(var i=0;i<args.length;i++){if(args[i] instanceof be.Behaviour){var vn=be.valueNow(args[i]);if(vn instanceof Array){this.arrs.push(args[i]);_168=[];this.arrs.push(_168);}else{if(((typeof (vn)=="object")&&(vn.nodeType==1))||(typeof (vn)=="string")||(vn==undefined)){_168.push(args[i]);}else{if(typeof (vn)=="object"){_167.push(args[i]);}else{throw ("createParameterizedTagB: unknown behaviour argument argument "+i);}}}}else{if(args[i] instanceof Array){var arr=args[i];for(var j=0;j<arr.length;j++){_168.push(arr[j]);}}else{var vn=args[i];if(((typeof (vn)=="object")&&(vn.nodeType==1))||(typeof (vn)=="string")||(vn==undefined)){_168.push(args[i]);}else{if(typeof (vn)=="object"){_167.push(args[i]);}}}}}if(_167.length>1){throw ("createParameterizedTagB "+tagName+": more than one attribute ("+_167.length+")");}this.attribs=_167.length>0?_167[0]:{};},insertChildrenNodes:function(){var ctx=this;function quickNode(e){if((typeof (e)=="object")&&(e.nodeType)){return e;}else{if(e==undefined){return document.createTextNode("");}else{return document.createTextNode(e);}}}function unBehaviourize(arr){return l.map(function(n){return (n instanceof be.Behaviour)?be.valueNow(n):n;},arr);}var _172=l.map(function(){return [];},this.arrs);var _173=l.map(unBehaviourize,unBehaviourize(this.arrs));var _174=c.createEventReceiver();var _175=c.createEventReceiver();function attachNodes(i,arr){for(var j=0;j<arr.length;j++){var _179=arr[j];if(_179 instanceof be.Behaviour){var _17a=(function(jj){return c.map_ev(function(n){return {index:i,jdex:jj,val:n};},be.changes(_179));})(j);_172[i].push(_17a);e.attachListenerNode(_17a,_175);_179=be.valueNow(_179);}}}var _17d=c.merge_e(c.map_ev(function(ai){var i=ai.index;var _180=ai.val;while(_172[i].length){var ln=_172[i].pop();e.removeListenerNode(ln,_175);}var _182=l.map(function(n){return quickNode(n);},unBehaviourize(_180));for(var j=0;j<_173[i].length;j++){ctx.currentTag.removeChild(_173[i][j]);}if(_182.length){var _185=null;for(ii=i+1;ii<_173.length&&!(_173[ii].length);ii++){}if(ii<_173.length){_185=_173[ii][0];}for(var j=0;j<_182.length;j++){ctx.currentTag.insertBefore(_182[j],_185);}}_173[i]=_182;attachNodes(i,_180);return ctx.currentTag;},_174),c.map_ev(function(ni){var i=ni.index;var j=ni.jdex;var _18a=quickNode(ni.val);d.swapDom(_173[i][j],_18a);_173[i][j]=_18a;return ctx.currentTag;},_175));c.map_ev(function(cc){c.sendEvent(ctx.resE,cc);},_17d);for(var i=0;i<this.arrs.length;i++){for(var j=0;j<_173[i].length;j++){_173[i][j]=quickNode(_173[i][j]);this.currentTag.appendChild(_173[i][j]);}if(this.arrs[i] instanceof be.Behaviour){attachNodes(i,be.valueNow(this.arrs[i]));var _18e=(function(ii){return c.map_ev(function(na){return {index:ii,val:na};},be.changes(ctx.arrs[ii]));})(i);e.attachListenerNode(_18e,_174);}else{attachNodes(i,this.arrs[i]);}}},enstyle:function(obj,vals){if(vals instanceof be.Behaviour){if(!(typeof (be.valueNow(vals))=="object")){throw "enstyle: expected object literal as behaviour value";}this.styleHooks.push(be.changes(vals));e.attachListenerNode(be.changes(vals),this.styleChangedE);}var _193=vals instanceof be.Behaviour?be.valueNow(vals):vals;if(typeof (_193)=="object"){for(var i in _193){if(!(Object.prototype)||!(Object.prototype[i])){this.enstyleProperty(obj,_193,i);}}}else{throw "enstyle: expected object literals";}},enstyleProperty:function(obj,vals,i){if(vals[i] instanceof be.Behaviour){if(typeof (be.valueNow(vals[i]))=="object"){this.enstyle(obj[i],vals[i]);}else{obj[i]=be.valueNow(vals[i]);c.map_ev(function(v){obj[i]=v;},be.changes(vals[i]));}}else{if(typeof (vals[i])=="object"){this.enstyle(obj[i],vals[i]);}else{obj[i]=vals[i];}}}};d.createParameterizedTagB=function(_199){return new d.TagB(_199,l.slice(arguments,1)).resB;};d.enstyleStaticProperty=function(obj,_19b,_19c,_19d){if(typeof (_19b[_19c])=="object"){for(var i in _19b[_19c]){if(!(Object.prototype)||!(Object.prototype[i])){d.enstyleStaticProperty(obj[_19c],_19b[_19c],i,_19d);}}}else{obj[_19c]=_19b[_19c];if(_19c=="checked"){obj["defaultChecked"]=_19b[_19c];}if(_19c=="selected"){obj["defaultSelected"]=_19b[_19c];}}};d.staticTagMaker=function(_19f){return function(){var tagD=document.createElement(_19f);if(!(tagD.nodeType>0)){throw (_19f+": invalid tag name");}var _1a1=[];for(var i=0;i<arguments.length;i++){if(arguments[i] instanceof Array){for(var j=0;j<arguments[i].length;j++){if(arguments[i][j]){tagD.appendChild((typeof (arguments[i][j])=="object"&&arguments[i][j].nodeType>0)?arguments[i][j]:document.createTextNode(arguments[i][j]));}}}else{if(!arguments[i]){}else{if((typeof (arguments[i])=="object")&&(arguments[i].nodeType>0)){tagD.appendChild(arguments[i]);}else{if(typeof (arguments[i])=="object"){_1a1.push(arguments[i]);}else{tagD.appendChild(document.createTextNode(arguments[i]));}}}}}if(_1a1.length==1){for(var k in _1a1[0]){if(!(Object.prototype)||!(Object.prototype[k])){d.enstyleStaticProperty(tagD,_1a1[0],k);}}}else{if(_1a1.length>0){throw "static enstyle: expected object literals";}}return tagD;};};var _1a5=["a","b","blockquote","br","button","canvas","div","fieldset","form","font","h1","h2","h3","h4","hr","img","iframe","input","label","legend","li","ol","optgroup","option","p","pre","select","span","strong","table","tbody","td","textarea","tfoot","th","thead","tr","tt","ul"];l.map(function(_1a6){var _1a7=_1a6.toUpperCase();d[_1a7+"B"]=function(){return d.createParameterizedTagB.apply(this,[_1a6].concat(l.slice(arguments,0)));};_a(d[_1a7+"B"],[_1a7+"B"]);d[_1a7]=d.staticTagMaker(_1a6);_a(d[_1a7],[_1a7]);},_1a5);d.TEXTB=function(strB){if(!(strB instanceof be.Behaviour)){strB=be.createConstantB(strB);}return be.hold(c.map_ev(function(txt){return document.createTextNode(txt);},be.changes(strB)),document.createTextNode(be.valueNow(strB)));};_a(d.TEXTB,["TEXTB"]);d.TEXT=function(strB){return be.valueNow(d.TEXTB(b.maybeEmpty,strB));};_a(d.TEXT,["TEXT"]);d.tagRec=function(_1ab,_1ac){if(!(_1ab instanceof Array)){throw "tagRec: expected array of event names as first arg";}if(!(_1ac instanceof Function)){throw "tagRec: expected function as second arg";}var _1ad=[];var _1ae=[];var _1af=l.map(function(_1b0){_1ae[_1b0]=c.createEventReceiver();_1ad[_1b0]=c.switch_e(_1ae[_1b0]);return _1ad[_1b0];},_1ab);var resB=_1ac.apply(this,_1af);var prev=undefined;var _1b3=e.createNode([be.changes(resB)],function(_,p){if(!l.isEqual(p.value,prev)){prev=p.value;for(var i=0;i<_1ab.length;i++){c.sendEvent(_1ae[_1ab[i]],d.extractEvent_e(p.value,_1ab[i]));}}});c.sendEvent(_1b3,be.valueNow(resB));return resB;};_a(d.tagRec,["tagRec","nodeWithOwnEvents"]);d.eventCounter=0;d.getEventName=function(_1b7){var id=null;try{id=_1b7.getAttribute("id");}catch(exn){}if((id===null)||(id===undefined)||(id.length<1)){id="flapjaxDomEvent"+d.eventCounter++;_1b7.id=id;}return id;};d.domEvents=[];d.extractEventStatic_e=function(_1b9,_1ba){_1b9=d.getObj(_1b9);var id=d.getEventName(_1b9);if((_1ba===undefined)||(_1ba===null)){throw "extractEvent_e: no evt name specified as third arg";}if(!d.domEvents[id]){d.domEvents[id]=[];}if(!d.domEvents[id][_1ba]){d.domEvents[id][_1ba]=c.createEventReceiver();d.addEvent(_1b9,_1ba,function(evt){var _1bd=evt;if(!evt){_1bd=window.event;}c.sendEvent(d.domEvents[id][_1ba],_1bd);return true;});}return c.map_ev(function(v){return v;},d.domEvents[id][_1ba]);};d.extractEvent_e=function(_1bf,_1c0){if(!(_1bf instanceof be.Behaviour)){return d.extractEventStatic_e.apply(this,arguments);}else{var r=c.createEventReceiver();var _1c2=c.map_ev(function(domD){return d.extractEventStatic_e(domD,_1c0);},c.merge_e(be.changes(_1bf),r));var _1c4=c.switch_e(_1c2);c.sendEvent(r,be.valueNow(_1bf));return _1c4;}};_a(d.extractEvent_e,["extractEvent_e","$EVT"],0,[be.Behaviour.prototype],["extractEvent_e","$EVT"]);d.extractEvents_e=function(_1c5){var _1c6=l.slice(arguments,1);var _1c7=l.map(function(_1c8){return d.extractEvent_e(_1c5,_1c8);},_1c6.length===0?[]:_1c6);return c.merge_e.apply(this,_1c7);};_a(d.extractEvents_e,["extractEvents_e"],0,[be.Behaviour.prototype],["extractEvents_e"]);d.extractValueOnEvent_e=function(_1c9,_1ca){if(!(_1c9 instanceof e.Event)){throw "extractValueOnEvent_e: expected Event as first arg";}return be.changes(d.extractValueOnEvent_b.apply(this,arguments));};_a(d.extractValueOnEvent_e,["extractValueOnEvent_e"]);d.extractDomFieldOnEvent_e=function(_1cb,_1cc){if(!(_1cb instanceof e.Event)){throw "extractDomFieldOnEvent_e: expected Event as first arg";}var _1cd=l.slice(arguments,2);var res=c.map_ev(function(){return d.getDomVal(_1cc,_1cd);},_1cb);return res;};d.extractValue_e=function(_1cf){return be.changes(d.extractValue_b.apply(this,arguments));};_a(d.extractValue_e,["extractValue_e","$E"]);d.extractValueOnEvent_b=function(_1d0,_1d1){return d.extractValueStatic_b(_1d1,_1d0);};_a(d.extractValueOnEvent_b,["extractValueOnEvent_b"]);d.extractValueStatic_b=function(_1d2,_1d3){var objD;try{objD=_2.dom.getObj(_1d2);if(typeof (_1d2)=="string"&&objD.id!=_1d2){throw "Make a radio group";}}catch(e){objD={type:"radio-group",name:_1d2};}var _1d5;switch(objD.type){case "checkbox":return be.hold(c.filterRepeats_e(d.extractDomFieldOnEvent_e(_1d3?_1d3:d.extractEvents_e(objD,"click","keyup","change"),objD,"checked"),objD.checked),objD.checked);case "select-one":_1d5=function(_){return objD.selectedIndex>-1?(objD.options[objD.selectedIndex].value?objD.options[objD.selectedIndex].value:objD.options[objD.selectedIndex].innerText):undefined;};return be.hold(c.filterRepeats_e(c.map_ev(_1d5,_1d3?_1d3:d.extractEvents_e(objD,"click","keyup","change")),_1d5()),_1d5());case "select-multiple":_1d5=function(_){var res=[];for(var i=0;i<objD.options.length;i++){if(objD.options[i].selected){res.push(objD.options[i].value?objD.options[i].value:objD.options[i].innerText);}}return res;};return be.hold(c.map_ev(_1d5,_1d3?_1d3:d.extractEvents_e(objD,"click","keyup","change")),_1d5());case "text":case "textarea":case "hidden":case "password":return be.hold(c.filterRepeats_e(d.extractDomFieldOnEvent_e(_1d3?_1d3:d.extractEvents_e(objD,"click","keyup","change"),objD,"value"),objD.value),objD.value);case "button":return be.hold(d.extractDomFieldOnEvent_e(_1d3?_1d3:d.extractEvents_e(objD,"click","keyup","change"),objD,"value"),objD.value);case "radio":case "radio-group":var _1da=l.filter(function(elt){return (elt.type=="radio")&&(elt.getAttribute("name")==objD.name);},document.getElementsByTagName("input"));_1d5=objD.type=="radio"?function(_){return objD.checked;}:function(_){for(var i=0;i<_1da.length;i++){if(_1da[i].checked){return _1da[i].value;}}return undefined;};var _1df=_1d3?_1d3:c.merge_e.apply(this,l.map(function(_1e0){return d.extractEvents_e(_1e0,"click","keyup","change");},_1da));return be.hold(c.filterRepeats_e(c.map_ev(_1d5,_1df),_1d5()),_1d5());default:throw ("extractValueStatic_b: unknown value type \""+objD.type+"\"");}};d.extractValue_b=function(_1e1){if(_1e1 instanceof be.Behaviour){return be.switch_b(be.lift_b(function(dom){return d.extractValueStatic_b(dom);},_1e1));}else{return d.extractValueStatic_b(_1e1);}};_a(d.extractValue_b,["extractValue_b","$B"],0,[be.Behaviour.prototype],["extractValue_b","$B"]);d.insertedValues=[];d.insertedDoms=[];d.deepStaticUpdate=function(into,from,_1e5){var fV=(from instanceof be.Behaviour)?be.valueNow(from):from;if(typeof (fV)=="object"){for(var i in fV){if(!(Object.prototype)||!(Object.prototype[i])){d.deepStaticUpdate(_1e5?into[_1e5]:into,fV[i],i);}}}else{var old=into[_1e5];into[_1e5]=fV;if(!l.isEqual(old,fV)){d.topE.sendEvent(fV);}}};d.deepDynamicUpdate=function(into,from,_1eb){var fV=(from instanceof be.Behaviour)?be.valueNow(from):from;if(typeof (fV)=="object"){if(from instanceof be.Behaviour){throw "deepDynamicUpdate: dynamic collections not supported";}for(var i in fV){if(!(Object.prototype)||!(Object.prototype[i])){d.deepDynamicUpdate(_1eb?into[_1eb]:into,fV[i],i);}}}else{if(from instanceof be.Behaviour){e.createNode([be.changes(from)],function(s,p){if(_1eb){var old=into[_1eb];into[_1eb]=p.value;if(!l.isEqual(old,p.value)){d.topE.sendEvent(p.value);}}else{into=p.value;}});}}};d.insertValue=function(val,_1f2){var _1f3=l.slice(arguments,2);var _1f4=d.getMostDom(_1f2,_1f3);d.deepStaticUpdate(_1f4,val,_1f3?_1f3[_1f3.length-1]:undefined);};_a(d.insertValue,["insertValue"]);d.insertValueE=function(_1f5,_1f6){if(!(_1f5 instanceof e.Event)){throw "insertValueE: expected Event as first arg";}var _1f7=l.slice(arguments,2);var _1f8=d.getMostDom(_1f6,_1f7);c.map_ev(function(v){d.deepStaticUpdate(_1f8,v,_1f7?_1f7[_1f7.length-1]:undefined);},_1f5);};_a(d.insertValueE,["insertValueE"],0,[e.Event.prototype],["insertValueE"]);d.insertValueB=function(_1fa,_1fb){var _1fc=l.slice(arguments,2);var _1fd=d.getMostDom(_1fb,_1fc);d.deepStaticUpdate(_1fd,_1fa,_1fc?_1fc[_1fc.length-1]:undefined);d.deepDynamicUpdate(_1fd,_1fa,_1fc?_1fc[_1fc.length-1]:undefined);};_a(d.insertValueB,["insertValueB"],0,[be.Behaviour.prototype],["insertValueB"]);d.insertValuesB=function(_1fe){var _1ff=l.map(function(arr){return l.slice(arr,1);},l.slice(arguments,1));var _201=l.map(function(arr){return arr[0];},l.slice(arguments,1));};_a(d.insertValuesB,["insertValuesB"]);d.insertDomE=function(_203,_204){if(!(_203 instanceof e.Event)){throw "insertDomE: expected Event as first arg";}var objD=d.getObj(_204);var res=c.map_ev(function(_207){if(!((typeof (_207)=="object")&&(_207.nodeType==1))){_207=d.SPAN({},_207);}d.swapDom(objD,_207);objD=_207;return _207;},_203);e.attachListenerNode(res,d.topE);return res;};_a(d.insertDomE,["insertDomE"],0,[e.Event.prototype],["insertDomE"]);d.insertDom=function(_208,_209,_20a){switch(_20a){case undefined:case null:case "over":d.swapDom(_208,_209);break;case "before":_208.parentNode.insertBefore(_209,_208);break;case "after":if(_208.nextSibling){_208.parentNode.insertBefore(_209,_208.nextSibling);}else{_208.parentNode.appendChild(_209);}break;case "leftMost":if(_208.parentNode.firstChild){_208.parentNode.insertBefore(_209,_208.parentNode.firstChild);}else{_208.parentNode.appendChild(_209);}break;case "rightMost":_208.parentNode.appendChild(_209);break;case "beginning":if(_208.firstChild){_208.insertBefore(_209,_208.firstChild);}else{_208.appendChild(_209);}break;case "end":_208.appendChild(_209);break;default:throw ("domInsert: unknown position: "+_20a);}};d.insertDomClean=function(_20b,hook,_20d){d.insertDom(d.getObj(hook),((typeof (_20b)=="object")&&(_20b.nodeType>0))?_20b:document.createTextNode(_20b),_20d);};_a(d.insertDomClean,["insertDom"]);d.duid=0;d.insertDomB=function(_20e,_20f,_210){if(!(_20e instanceof be.Behaviour)){_20e=be.createConstantB(_20e);}var _211=be.lift_b(function(d){if((typeof (d)=="object")&&(d.nodeType>0)){return d;}else{var res=document.createElement("span");res.appendChild(document.createTextNode(d));return res;}},_20e);var _214=be.valueNow(_211);if(!((typeof (_214)=="object")&&(_214.nodeType==1))){throw ("insertDomB: initial value conversion failed: "+_214);}d.insertDom(_20f===null||_20f===undefined?d.getObj(_214.getAttribute("id")):d.getObj(_20f),_214,_210);var resB=be.hold(d.insertDomE(be.changes(_211),_214),_214);return resB;};_a(d.insertDomB,["insertDomB"],0,[be.Behaviour.prototype],["insertDomB"]);d.extractId_b=function(id,_217){return be.hold(e.createNode(_217===undefined?[d.topE]:_217 instanceof be.Behaviour?[be.changes(_217)]:[],function(s,p){p.value=d.getObj(id);s(p);}),d.getObj(id));};_a(d.insertDomB,["extractId_b"],1,[be.Behaviour.prototype],["extractId_b"]);var m_b;d.mouse_b=function(_21b){var _21c=l.slice(arguments,1);if(arguments.length<2){_21c=["mousemove"];}if((_21b===undefined)||(_21b===null)){_21b=document;}if((m_b!==undefined)&&(arguments.length<2)&&(_21b==document)){return m_b;}var _21d=(_21c.length==1)?d.extractEvent_e(_21b,_21c[0]):c.merge_e.apply(this,l.map(function(evt){return d.extractEvent_e(_21b,evt);},_21c));var res=be.hold(c.map_ev(function(e){return (e.pageX||e.pageY)?{left:e.pageX,top:e.pageY}:(e.clientX||e.clientY)?{left:e.clientX+document.body.scrollLeft,top:e.clientY+document.body.scrollTop}:{left:0,top:0};},_21d),{left:0,top:0});if(arguments.length<2&&_21b==document){m_b=res;}return res;};_a(d.mouse_b,["mouse_b"]);d.mouseLeft_b=function(_221){return be.lift_b(function(posn){return posn.left;},d.mouse_b.apply(this,arguments));};_a(d.mouseLeft_b,["mouseLeft_b"]);d.mouseTop_b=function(_223){return be.lift_b(function(posn){return posn.top;},d.mouse_b.apply(this,arguments));};_a(d.mouseTop_b,["mouseTop_b"]);a.getURLParam=function(_225){var _226=_225.toLowerCase();var _227=[];var _228=window.location.href;var _229=(_228.indexOf("#")>-1)?_228.indexOf("#"):_228.length;if(_228.indexOf("?")>-1){var _22a=_228.substring(_228.indexOf("?")+1,_229);l.map(function(qp){var eq=qp.indexOf("=");var _22d=qp.substr(0,eq+1).toLowerCase();if(_22d==_226+"="){_227.push(decodeURIComponent(qp.substr(eq+1)));}},_22a.split("&"));}if(_227.length==0){return undefined;}else{if(_227.length==1){return _227[0];}else{return _227;}}};_a(a.getURLParam,["getURLParam","$URL"]);a.getHTTPObject=function(){var _22e=false;if(!_22e&&typeof XMLHttpRequest!="undefined"){try{_22e=new XMLHttpRequest();}catch(e){_22e=false;}}if(!_22e&&window.createRequest){try{_22e=window.createRequest();}catch(e){_22e=false;}}return _22e;};_a(a.getHTTPObject,["getHTTPObject"]);a.readCookie=function(name){var _230=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var co=ca[i];while(co.charAt(0)==" "){co=co.substring(1,co.length);}if(co.indexOf(_230)===0){return co.substring(_230.length,co.length);}}return undefined;};_a(a.readCookie,["readCookie"]);a.rpc=function(url,_235,_236,_237){var http=a.getHTTPObject();http.open("POST",url,(_237===undefined)?true:_237);http.setRequestHeader("Content-type","application/x-www-form-urlencoded");http.onreadystatechange=function(){if(http.readyState==4){_236(http);}};http.send(_235);};_a(a.rpc,["rpc","rpcPost"]);a.rpcGet=function(url,_23a,_23b){var http=a.getHTTPObject();http.open("GET",url,(_23b===undefined)?true:_23b);http.onreadystatechange=function(){if(http.readyState==4){_23a(http);}};http.send(null);};_a(a.rpc,["rpc","rpcGet"]);a.httpRPC_e=function(node,_23e){var rpcE=e.createNode([node],function(s,p){a.rpc(p.value.url,p.value.postData,function(http){s(new b.Pulse(p.stamp,http.responseText));});});return (_23e instanceof Function)?c.merge_e(c.map_ev(_23e,node),rpcE):rpcE;};_a(a.httpRPC_e,["httpRPC_e"],1,[e.Event.prototype],["httpRPC_e"]);a.scriptCounter=0;a.deleteScript=function(_243){var _244=d.getObj(_243);_244.parentNode.removeChild(_244);};a.runScript=function(url,fn,_247){var _248=document.createElement("script");_248.src=url;var _249="scriptFnRPC"+a.scriptCounter++;_248.setAttribute("id",_249);document.getElementsByTagName("head").item(0).appendChild(_248);var _24a={};var _24b=function(){eval("try { if ("+_247+"!== undefined) {var stat = "+_247+";}} catch (e) {}");if(stat!==undefined){eval(_247+" = undefined;");clearInterval(_24a.timer);clearInterval(_24a.timeout);if(fn instanceof Function){fn(stat);}a.deleteScript(_249);}};_24a.timer=setInterval(_24b,3500);_24a.timeout=setTimeout(function(){try{clearInterval(_24a.timer);}catch(e){}},5000);};a.evalForeignScriptVal_e=function(node){return e.createNode([node],function(s,p){a.runScript(p.value.url,function(_24f){s(new b.Pulse(p.stamp,_24f));},p.value.globalArg);});};_a(a.evalForeignScriptVal_e,["evalForeignScriptVal_e"],0,[e.Event.prototype],["evalForeignScriptVal_e"]);a.evalForeignScriptFn_e=function(node){return e.createNode([node],function(s,p){var _253="scriptFnRPC"+a.scriptCounter++;eval(_253+"= function (res){"+"s(new b.Pulse(p.stamp, res));"+"setTimeout(function(){a.deleteScript(\""+_253+"\")},1000);}");var _254=document.createElement("script");_254.src=p.value.before+_253+p.value.after;var _255=_253;_254.setAttribute("id",_255);document.getElementsByTagName("head").item(0).appendChild(_254);});};_a(a.evalForeignScriptFn_e,["evalForeignScriptFn_e"],0,[e.Event.prototype],["evalForeignScriptFn_e"]);if(_1!==false){for(var zz in _2.pub){window[zz]=_2.pub[zz];}}return _2.pub;}